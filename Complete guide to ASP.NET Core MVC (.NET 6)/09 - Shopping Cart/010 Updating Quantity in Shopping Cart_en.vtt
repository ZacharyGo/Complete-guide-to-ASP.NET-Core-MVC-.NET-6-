WEBVTT

00:01.690 --> 00:08.260
So far, the shopping cart, we have the plus minus and delete button, if we go to our database for

00:08.260 --> 00:15.340
our shopping cart, we identify each of the card uniquely based on the card ID that we have right here.

00:16.300 --> 00:22.660
So when we want to implement the increment or remove the card, we just passed this I.D. and then toggle

00:22.660 --> 00:23.230
the account.

00:24.370 --> 00:29.440
So to do that, let me go back to the application and inside the index for you.

00:29.830 --> 00:31.930
We have the anchor tags right here.

00:33.160 --> 00:38.470
So when someone clicks on the plus button, we want to call an MSP action.

00:39.160 --> 00:40.870
Will call that action.

00:41.290 --> 00:47.470
And since I've been implementing this action in the same card controller, I do not have to explicitly

00:47.470 --> 00:48.940
mention the controller name.

00:49.870 --> 00:56.530
But when we want to implement, decrement or do anything, we need to pass the card I.D. So we get past

00:56.530 --> 00:58.840
that as the SPF parameter.

00:59.560 --> 01:01.150
So we'll set SB wrote.

01:01.420 --> 01:07.270
Correct I.D. is equal to we are, in fact, for each group for the card.

01:07.840 --> 01:12.190
So if you do the add sign inside item, we have the capacity.

01:13.750 --> 01:18.730
I have a copy this paste it and change the action name to a minus.

01:19.210 --> 01:21.230
And we have to leave it right here.

01:21.790 --> 01:25.960
So this I can call it remove and all the reaction.

01:26.290 --> 01:27.700
We just need to cart it.

01:28.690 --> 01:32.890
So let's go to our card controller and add those action method.

01:33.940 --> 01:37.870
So first, let me make some space here with it.

01:37.870 --> 01:44.920
First, create public action wizard, and this will be the last one inside the parameter.

01:45.070 --> 01:46.650
We know we received the card.

01:48.110 --> 01:52.610
Based on that car, did we have to retrieve that shopping cart from the database?

01:53.270 --> 01:58.880
So it's a variable card is equal to underscore unit of work doctor shopping card.

01:59.630 --> 02:02.090
But we have to get first our default.

02:02.840 --> 02:07.380
We will see you close to 80 is equal equal to the card 80.

02:08.770 --> 02:15.310
We do not want to use include properties because we just want to update the shopping cart code once

02:15.310 --> 02:18.370
we do that instead, unit of work shopping cart.

02:18.730 --> 02:21.430
We have the method of incrementing the count.

02:22.240 --> 02:25.320
We need to pass the card here and the new count.

02:25.390 --> 02:27.520
We want to increment that by one.

02:28.690 --> 02:32.410
Once we do that, we can go back to the index action method.

02:32.920 --> 02:36.970
So right here we will return redirect to action.

02:37.630 --> 02:41.980
We want to redirect to the name of and index action.

02:43.000 --> 02:48.310
Now, if you restart the application and try to increment your account, it will not work.

02:49.030 --> 02:52.570
I want you guys to analyze on why that is not working.

02:53.140 --> 02:56.530
We are missing one line of code and that is important.

02:57.520 --> 02:58.330
Let's log in.

02:58.540 --> 03:02.380
And let me show you if you click on.

03:02.380 --> 03:05.170
Plus, you will notice that count is not increasing.

03:05.890 --> 03:10.600
I want you guys to pause the video and find out why this is not working.

03:11.380 --> 03:14.710
I hope you are able to figure it out and why that is not working.

03:15.070 --> 03:19.180
It is because when we increment the count, we did not see if that changes.

03:19.840 --> 03:24.490
Only when you call the saved method, then the changes are saved in your database.

03:25.270 --> 03:31.510
I intentionally did not write this line because so far I have been including this every time I am programming.

03:31.960 --> 03:36.010
Because of that, you might forget how important the safe method is.

03:37.010 --> 03:41.450
So with that, if you and the application now, the increment should work.

03:46.320 --> 03:52.530
So we go to our card and perfect offense we increment, you can see the total is also changing with

03:52.530 --> 04:00.840
the count so that it's working as expected, that my confidence and pasted two or more times we have

04:00.840 --> 04:02.190
minus and remove.

04:03.300 --> 04:05.460
Let me first program to remove here.

04:05.460 --> 04:12.420
Based on the current I.D. we retrieve the car clear and we just call the remove method on our shopping

04:12.420 --> 04:12.900
cart.

04:13.970 --> 04:21.320
Next, we have the minus here inside minus just the increment, the counter, so rather than increment

04:21.320 --> 04:23.930
count because the increment count.

04:24.650 --> 04:29.480
With that, let me run the application and show you one issue with minus.

04:31.960 --> 04:35.200
So let's go here and add those to the shopping cart.

04:35.890 --> 04:39.520
We'll have to log in, of course, once we add this.

04:39.730 --> 04:43.570
Let me go to the card so we have three distinct items.

04:44.560 --> 04:46.360
Let's try to delete the first one.

04:46.780 --> 04:49.870
And that's what our total is also updated.

04:50.680 --> 04:52.750
If we try to increase, that is working.

04:53.050 --> 04:54.590
Decrease is also working.

04:55.120 --> 05:01.690
But if the quantity is one and you decrease now with zero, it goes to a minus and that is not a good

05:01.690 --> 05:02.050
thing.

05:02.860 --> 05:09.520
So if the quantity is equal to one, then if someone hits the minus button, the shopping cart must

05:09.520 --> 05:10.180
be removed.

05:11.140 --> 05:16.750
So let me start the application, and before we take the counter, we will check here.

05:17.230 --> 05:22.660
If cart start count is less than or equal to one, it will always be one.

05:22.690 --> 05:25.570
It should never be less than, but it doesn't matter.

05:26.710 --> 05:29.740
In that case, we just want to remove the shopping cart.

05:30.640 --> 05:37.840
So we have this right here, in that case, we just want to remove our shopping cart in the as far.

05:40.240 --> 05:45.820
We will be documenting that counter that's run this and test all of the scenarios.

05:47.890 --> 05:49.570
Let's lock into one account.

05:49.900 --> 05:56.110
Go to the card, and if it increment, there's one fact that is removed because the count was one.

05:57.280 --> 05:58.820
Let's do that one more time.

05:59.140 --> 06:00.220
And that's working.

06:01.270 --> 06:09.400
So with this, our shopping cart is working as expected in the next video when we hit the summary button.

06:09.790 --> 06:13.900
We want to load a final summary page before we place the order.
